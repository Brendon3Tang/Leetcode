# 背包问题总结

## 在讲解背包问题的时候，都是按照如下五部来逐步分析:
1. 确定是01背包问题（背包要倒序遍历）还是完全背包问题（背包要正序遍历）；确定是组合问题（外层遍历物品，内层遍历背包）还是排列问题（外层遍历背包，内层遍历物品）还是无所谓
2. 确定dp数组（dp table）以及下标的含义
3. 确定递推公式
4. dp数组如何初始化
5. 确定遍历顺序
6. 举例推导dp数组  
   
其实这五部⾥哪⼀步都很关键，但确定递推公式和确定遍历顺序都具有规律性和代表性，所以下⾯我从这两点来对背包问题做⼀做总结。

## 二维数组为什么可以变成一维滚动数组？
- [复习代码随想录第四十二天笔记，看三道题的思路部分](./../代码随想录算法训练营第四十二天%20|%201049.%20最后一块石头的重量%20II、494.%20目标和、474.%20一和零.md)

## 为什么完全背包可以正序遍历？
- [复习代码随想录第四十五天笔记，看第一道题的思路部分](./../代码随想录算法训练营第四十五天%20|%2070.%20爬楼梯(进阶)、322.%20零钱兑换、279.%20完全平方数.md)
- [ 宫水三叶的刷题日记 -【动态规划/背包问题】从数学角度推导「完全背包」与「01 背包」之间的遍历顺序关系](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247486107&idx=1&sn=e5fa523008fc5588737b7ed801caf4c3&chksm=fd9ca184caeb28926959c0987208a3932ed9c965267ed366b5b82a6fc16d42f1ff40c29db5f1&token=990510480&lang=zh_CN&scene=21#wechat_redirect)（推荐关注公众号后在手机上用日间模式观看，夜间模式/网页版看不清一些公式）

## 背包递推公式
### 问能否能装满背包（或者最多装多少）：
**dp[j] = max(dp[j], dp[j - nums[i]] + nums[i]);** ，对应题⽬如下：
- 动态规划：416.分割等和⼦集
- 动态规划：1049.最后⼀块⽯头的重量 II

### 问装满背包有⼏种⽅法：
**dp[j] += dp[j - nums[i]]** ，对应题⽬如下：
- 动态规划：494.⽬标和
- 动态规划：518. 零钱兑换 II
- 动态规划：377.组合总和Ⅳ
- 动态规划：70. 爬楼梯进阶版（完全背包）

### 背包方案数的公式是怎么来的？
- 假设dp[ j ]表示取得价值为j的方案一共有dp[ j ]种。
- 为了方便理解，**可以把背包方案数问题想像成爬楼梯方案数问题**，只是可选择的步数不只有{1,2}两种，而是有{coins[ 0 ], coins[ 1 ], ..., coins[ n ]} n种。所以上到第 j 阶楼梯的方法有dp[j - coins[ 0 ]] + dp[j - coins[ 1 ]] + ... + dp[j - coins[ n ]]种，即dp[ j ] = dp[ j ] + dp[j - coins[ i ]]。（[example可看第四十四天第一题（518. 零钱兑换 II）](../代码随想录算法训练营第四十四天%20|%20518.%20零钱兑换%20II、.md)）

### 问背包装满最⼤价值：
**dp[j] = max(dp[j], dp[j - weight[i]] + value[i]);**，对应题⽬如下：
- 动态规划：474.⼀和零
  
### 问装满背包所有物品的最⼩个数：
**dp[j] = min(dp[j - coins[i]] + 1, dp[j]);**，对应题⽬如下：
- 动态规划：322.零钱兑换
- 动态规划：279.完全平⽅数

## 遍历顺序
### 01背包

⼆维dp数组01背包先遍历物品还是先遍历背包都是可以的，且第⼆层for循环是从⼩到⼤遍历。⼀维dp数组01背包只能先遍历物品再遍历背包容量，且第⼆层for循环是从⼤到⼩遍历。⼀维dp数组的背包在遍历顺序上和⼆维dp数组实现的01背包其实是有很⼤差异的，⼤家需要注意！

### 完全背包

说完01背包，再看看完全背包。纯完全背包的⼀维dp数组，先遍历物品还是先遍历背包都是可以的，且第⼆层for循环是从⼩到⼤遍历。但是仅仅是纯完全背包的遍历顺序是这样的，题⽬稍有变化，两个for循环的先后顺序就不⼀样了。如果求组合数就是外层for循环遍历物品，内层for遍历背包。如果求排列数就是外层for遍历背包，内层for循环遍历物品。相关题⽬如下：
- 求组合数：动态规划：518.零钱兑换II
- 求排列数：动态规划：377. 组合总和 Ⅳ、动态规划：70. 爬楼梯进阶版（完全背包）
  
如果求最⼩数，那么两层for循环的先后顺序就⽆所谓了，相关题⽬如下：
- 求最⼩数：动态规划：322. 零钱兑换、动态规划：279.完全平⽅数

对于背包问题，其实递推公式算是容易的，难是难在遍历顺序上，如果把遍历顺序搞透，才算是真正理解了。